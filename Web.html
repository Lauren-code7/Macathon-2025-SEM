<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Study Group Allocation System</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 1rem;
            text-align: center;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 1rem;
            padding: 1rem;
        }
        .card h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5rem;
        }
        .btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .btn-lg {
            padding: 0.75rem 1.5rem;
            font-size: 1.1rem;
        }
        .groups-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }
        .group-card {
            border-left: 4px solid #3498db;
        }
        .student-list {
            list-style-type: none;
            padding-left: 0;
        }
        .student-list li {
            padding: 0.3rem 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .log-container {
            max-height: 300px;
            overflow-y: auto;
            background-color: #f8f8f8;
            padding: 1rem;
            border-radius: 4px;
            border: 1px solid #ddd;
            font-family: monospace;
            white-space: pre-wrap;
        }
        #console-output {
            margin: 0;
        }
        .status-bar {
            background-color: #ecf0f1;
            padding: 0.5rem;
            text-align: center;
            font-weight: bold;
            margin-bottom: 1rem;
            border-radius: 4px;
        }
        .tab-container {
            margin-bottom: 1rem;
        }
        .tab-buttons {
            display: flex;
            margin-bottom: 0.5rem;
        }
        .tab-btn {
            padding: 0.5rem 1rem;
            cursor: pointer;
            background-color: #ecf0f1;
            border: none;
            flex: 1;
        }
        .tab-btn.active {
            background-color: #3498db;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .email-preview {
            border: 1px solid #ddd;
            padding: 1rem;
            background-color: white;
            margin-bottom: 1rem;
        }
        .email-header {
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        .data-table th, .data-table td {
            padding: 0.5rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        .data-table th {
            background-color: #f8f8f8;
        }
        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 3px;
            font-size: 0.8rem;
            color: white;
        }
        .badge-success {
            background-color: #2ecc71;
        }
        .badge-danger {
            background-color: #e74c3c;
        }
        .availability-tag {
            display: inline-block;
            margin: 0.1rem;
            padding: 0.2rem 0.4rem;
            background-color: #3498db;
            color: white;
            border-radius: 3px;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <header>
        <h1>University Study Group Allocation System</h1>
    </header>
    
    <div class="container">
        <div class="status-bar" id="status-bar">Ready to allocate study groups</div>
        
        <div class="card">
            <h3>System Controls</h3>
            <button id="run-allocation" class="btn btn-lg">Run Group Allocation</button>
        </div>

        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-btn active" data-tab="groups">Study Groups</button>
                <button class="tab-btn" data-tab="students">Students</button>
                <button class="tab-btn" data-tab="locations">Locations</button>
                <button class="tab-btn" data-tab="catering">Catering</button>
                <button class="tab-btn" data-tab="console">Console Output</button>
                <button class="tab-btn" data-tab="emails">Email Previews</button>
            </div>
            
            <div class="tab-content active" id="groups-tab">
                <div class="card">
                    <h3>Allocated Study Groups</h3>
                    <div id="groups-container" class="groups-container">
                        <p>No groups allocated yet. Click "Run Group Allocation" to begin.</p>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="students-tab">
                <div class="card">
                    <h3>Registered Students</h3>
                    <div id="students-container"></div>
                </div>
            </div>
            
            <div class="tab-content" id="locations-tab">
                <div class="card">
                    <h3>Available Locations</h3>
                    <div id="locations-container"></div>
                </div>
            </div>
            
            <div class="tab-content" id="catering-tab">
                <div class="card">
                    <h3>Catering Options</h3>
                    <div id="catering-container"></div>
                </div>
            </div>
            
            <div class="tab-content" id="console-tab">
                <div class="card">
                    <h3>Console Output</h3>
                    <div class="log-container">
                        <pre id="console-output"></pre>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="emails-tab">
                <div class="card">
                    <h3>Email Previews</h3>
                    <div id="emails-container"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
    // Data structures using JavaScript classes
    class Student {
      constructor(id, name, email, degree, hasMembership, availability) {
        this.id = id;
        this.name = name;
        this.email = email;
        this.degree = degree;
        this.hasMembership = hasMembership;
        this.availability = availability; // {"Monday": ["morning", "afternoon"], "Tuesday": ["morning"], ...}
      }
    }

    class Location {
      constructor(id, name, capacity, availability) {
        this.id = id;
        this.name = name;
        this.capacity = capacity;
        this.availability = availability; // {"Monday": ["morning", "afternoon"], "Tuesday": ["morning"], ...}
      }
    }

    class CateringOption {
      constructor(name, location, priceRange, distanceToCampus) {
        this.name = name;
        this.location = location;
        this.priceRange = priceRange; // "$", "$$", etc.
        this.distanceToCampus = distanceToCampus; // in minutes walking
      }
    }

    class StudyGroup {
      constructor(id, day, timeSlot, location, students) {
        this.id = id;
        this.day = day;
        this.timeSlot = timeSlot; // "morning" or "afternoon"
        this.location = location;
        this.students = students;
      }
    }

    // Sample data (in a real system, this would come from a database)
    const students = [
      new Student(1, "Alice Smith", "alice@university.edu", "Computer Science", true, 
              {"Monday": ["morning"], "Wednesday": ["afternoon"], "Friday": ["morning", "afternoon"]}),
      new Student(2, "Bob Johnson", "bob@university.edu", "Computer Science", true, 
              {"Monday": ["afternoon"], "Wednesday": ["morning", "afternoon"], "Thursday": ["morning"]}),
      new Student(3, "Charlie Brown", "charlie@university.edu", "Biology", true, 
              {"Tuesday": ["morning"], "Wednesday": ["afternoon"], "Friday": ["morning"]}),
      new Student(4, "Diana Prince", "diana@university.edu", "Biology", true, 
              {"Monday": ["morning"], "Wednesday": ["afternoon"], "Friday": ["morning"]}),
      new Student(5, "Evan Williams", "evan@university.edu", "Physics", true, 
              {"Monday": ["morning", "afternoon"], "Thursday": ["afternoon"], "Friday": ["morning"]}),
      new Student(6, "Fiona Apple", "fiona@university.edu", "Physics", false,  // No membership
              {"Tuesday": ["morning", "afternoon"], "Wednesday": ["morning"], "Friday": ["afternoon"]}),
      new Student(7, "Greg House", "greg@university.edu", "Medicine", true, 
              {"Monday": ["afternoon"], "Wednesday": ["morning", "afternoon"], "Thursday": ["morning"]}),
      new Student(8, "Helen Troy", "helen@university.edu", "Medicine", true, 
              {"Tuesday": ["morning"], "Wednesday": ["afternoon"], "Friday": ["morning"]}),
      new Student(9, "Ivan Drago", "ivan@university.edu", "Computer Science", true, 
              {"Monday": ["morning"], "Wednesday": ["morning", "afternoon"], "Friday": ["morning"]}),
    ];

    const locations = [
      new Location(1, "Library Study Room A", 8, 
               {"Monday": ["morning", "afternoon"], "Tuesday": ["morning", "afternoon"], 
                "Wednesday": ["morning", "afternoon"], "Thursday": ["morning", "afternoon"], 
                "Friday": ["morning", "afternoon"]}),
      new Location(2, "Computer Lab 101", 15, 
               {"Monday": ["afternoon"], "Tuesday": ["morning"], 
                "Wednesday": ["morning", "afternoon"], "Thursday": ["afternoon"], 
                "Friday": ["morning"]}),
      new Location(3, "Science Building Room 305", 10, 
               {"Monday": ["morning"], "Tuesday": ["afternoon"], 
                "Wednesday": ["morning"], "Thursday": ["morning", "afternoon"], 
                "Friday": ["afternoon"]}),
      new Location(4, "Student Union Meeting Room", 20, 
               {"Monday": ["morning", "afternoon"], "Wednesday": ["afternoon"], 
                "Friday": ["morning", "afternoon"]}),
    ];

    const cateringOptions = [
      new CateringOption("Campus Cafe", "Student Union Building", "$", 2),
      new CateringOption("Green Salads", "Science Building", "$$", 0),
      new CateringOption("Pizza Corner", "Off-campus (North)", "$", 5),
      new CateringOption("Sandwich Express", "Library Ground Floor", "$", 1),
      new CateringOption("Healthy Bites", "Sports Complex", "$$", 7),
      new CateringOption("Taco Truck", "Engineering Parking Lot", "$", 3),
    ];

    // Email configuration (replace with actual SMTP settings)
    const SMTP_SERVER = "smtp.university.edu";
    const SMTP_PORT = 587;
    const SENDER_EMAIL = "study.groups@university.edu";
    const SENDER_PASSWORD = "password123"; // In a real system, use environment variables

    // Override console.log for our UI
    const originalLog = console.log;
    const logOutput = document.getElementById('console-output');
    const emailsContainer = document.getElementById('emails-container');
    
    console.log = function(...args) {
      originalLog.apply(console, args);
      const message = args.join(' ');
      logOutput.innerHTML += message + '\n';
      
      // Check if this is an email message
      if (message.includes('EMAIL to:')) {
        const emailLines = [];
        let inEmail = false;
        let currentEmail = '';
        
        // Process the next few console logs to get the complete email
        const lines = logOutput.innerHTML.split('\n');
        
        for (let i = lines.length - 1; i >= 0; i--) {
          const line = lines[i];
          
          if (line.includes('-'.repeat(50))) {
            inEmail = false;
            if (currentEmail) {
              emailLines.reverse();
              addEmailPreview(emailLines.join('\n'));
              currentEmail = '';
              emailLines.length = 0;
            }
          }
          
          if (inEmail) {
            emailLines.push(line);
          }
          
          if (line.includes('EMAIL to:')) {
            inEmail = true;
            currentEmail = line;
            emailLines.push(line);
          }
        }
      }
    };

    // Helper functions
    function verifyMembership(student) {
      /**
       * Check if student has paid for membership
       */
      return student.hasMembership;
    }

    function findCommonAvailability(students) {
      /**
       * Find days and time slots when all students are available
       */
      const commonAvailability = {};
      
      // Start with the first student's availability
      if (students.length > 0) {
        for (const [day, slots] of Object.entries(students[0].availability)) {
          commonAvailability[day] = [...slots];
        }
      }
      
      // Intersect with each subsequent student's availability
      for (let i = 1; i < students.length; i++) {
        const student = students[i];
        const daysToCheck = [...Object.keys(commonAvailability)];
        
        for (const day of daysToCheck) {
          if (!(day in student.availability)) {
            delete commonAvailability[day];
            continue;
          }
          
          const commonSlots = [];
          for (const slot of commonAvailability[day]) {
            if (student.availability[day].includes(slot)) {
              commonSlots.push(slot);
            }
          }
          
          if (commonSlots.length > 0) {
            commonAvailability[day] = commonSlots;
          } else {
            delete commonAvailability[day];
          }
        }
      }
      
      return commonAvailability;
    }

    function findAvailableLocations(day, timeSlot, groupSize) {
      /**
       * Find locations available for the given day, time slot, and group size
       */
      const availableLocations = [];
      
      for (const location of locations) {
        if (day in location.availability && 
            location.availability[day].includes(timeSlot) && 
            location.capacity >= groupSize) {
          availableLocations.push(location);
        }
      }
      
      return availableLocations;
    }

    function bookLocation(location, day, timeSlot) {
      /**
       * Book a location for a specific day and time slot
       */
      if (day in location.availability && location.availability[day].includes(timeSlot)) {
        // In a real system, this would update a database
        location.availability[day] = location.availability[day].filter(slot => slot !== timeSlot);
        return true;
      }
      return false;
    }

    function createStudyGroups() {
      /**
       * Main function to create and allocate study groups
       */
      const studyGroups = [];
      const eligibleStudents = students.filter(s => verifyMembership(s));
      const unallocatedStudents = [...eligibleStudents];
      let groupId = 1;
      
      // Group by degree
      const degreeGroups = {};
      for (const student of eligibleStudents) {
        if (!(student.degree in degreeGroups)) {
          degreeGroups[student.degree] = [];
        }
        degreeGroups[student.degree].push(student);
      }
      
      // Create groups ensuring at least 2 students from the same degree
      for (const [degree, studentsInDegree] of Object.entries(degreeGroups)) {
        // Create a working copy so we don't modify the original degrees list
        const degreeStudents = [...studentsInDegree];
        
        while (degreeStudents.length >= 2) {
          // Start with 2 students from the same degree
          const firstStudent = degreeStudents.shift();
          const secondStudent = degreeStudents.shift();
          
          // Make sure we remove them from unallocatedStudents as well
          const firstIndex = unallocatedStudents.findIndex(s => s.id === firstStudent.id);
          if (firstIndex !== -1) {
            unallocatedStudents.splice(firstIndex, 1);
          }
          
          const secondIndex = unallocatedStudents.findIndex(s => s.id === secondStudent.id);
          if (secondIndex !== -1) {
            unallocatedStudents.splice(secondIndex, 1);
          }
          
          const groupStudents = [firstStudent, secondStudent];
          
          // Try to add more students (up to 6 per group) with compatible schedules
          let groupAvailability = findCommonAvailability(groupStudents);
          
          if (Object.keys(groupAvailability).length === 0) { // If these two students have no common time
            continue;
          }
          
          // Add more students if possible
          const potentialAdditions = [...unallocatedStudents];
          // Shuffle the array (Fisher-Yates algorithm)
          for (let i = potentialAdditions.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [potentialAdditions[i], potentialAdditions[j]] = [potentialAdditions[j], potentialAdditions[i]];
          }
          
          for (const student of potentialAdditions) {
            if (groupStudents.length >= 6) { // Limit group size
              break;
            }
            
            // Test if this student can be added
            const testGroup = [...groupStudents, student];
            const testAvail = findCommonAvailability(testGroup);
            
            if (Object.keys(testAvail).length > 0) { // Can add this student
              groupStudents.push(student);
              
              const studentIndex = unallocatedStudents.findIndex(s => s.id === student.id);
              if (studentIndex !== -1) {
                unallocatedStudents.splice(studentIndex, 1);
              }
              
              const degreeIndex = degreeStudents.findIndex(s => s.id === student.id);
              if (degreeIndex !== -1) {
                degreeStudents.splice(degreeIndex, 1);
              }
              
              // Update the common availability
              groupAvailability = testAvail;
            }
          }
          
          // Schedule the group
          if (Object.keys(groupAvailability).length > 0) {
            const days = Object.keys(groupAvailability);
            const day = days[Math.floor(Math.random() * days.length)];
            const timeSlot = groupAvailability[day][Math.floor(Math.random() * groupAvailability[day].length)];
            
            // Find and book location
            const availableLocations = findAvailableLocations(day, timeSlot, groupStudents.length);
            
            if (availableLocations.length > 0) {
              const location = availableLocations[Math.floor(Math.random() * availableLocations.length)];
              if (bookLocation(location, day, timeSlot)) {
                const studyGroup = new StudyGroup(groupId, day, timeSlot, location, groupStudents);
                studyGroups.push(studyGroup);
                groupId++;
              }
            }
          }
        }
      }
      
      // Try to allocate remaining students to existing groups or create new diverse groups
      while (unallocatedStudents.length > 0) {
        const currentStudent = unallocatedStudents.shift();
        let added = false;
        
        // Try to add to existing groups first
        for (const group of studyGroups) {
          if (group.students.length < 6) { // Check if group has space
            const testGroup = [...group.students, currentStudent];
            const testAvail = findCommonAvailability(testGroup);
            
            if (group.day in testAvail && 
                testAvail[group.day].includes(group.timeSlot) && 
                group.location.capacity > group.students.length) {
              group.students.push(currentStudent);
              added = true;
              break;
            }
          }
        }
        
        if (!added && unallocatedStudents.length >= 1) {
          // Try to form a new group with remaining students
          const potentialGroup = [currentStudent];
          let remainingAvail = JSON.parse(JSON.stringify(currentStudent.availability)); // Deep copy
          
          // Make a temporary list to iterate through
          const tempUnallocated = [...unallocatedStudents];
          // Shuffle the array (Fisher-Yates algorithm)
          for (let i = tempUnallocated.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [tempUnallocated[i], tempUnallocated[j]] = [tempUnallocated[j], tempUnallocated[i]];
          }
          
          // Track which students we actually add so we can remove them later
          const studentsToRemove = [];
          
          for (const student of tempUnallocated) {
            if (potentialGroup.length >= 6) {
              break;
            }
            
            const testGroup = [...potentialGroup, student];
            const testAvail = findCommonAvailability(testGroup);
            
            if (Object.keys(testAvail).length > 0) {
              potentialGroup.push(student);
              remainingAvail = testAvail;
              studentsToRemove.push(student);
            }
          }
          
          // Remove the students we've added
          for (const student of studentsToRemove) {
            const studentIndex = unallocatedStudents.findIndex(s => s.id === student.id);
            if (studentIndex !== -1) { // Safety check
              unallocatedStudents.splice(studentIndex, 1);
            }
          }
          
          if (potentialGroup.length >= 2 && Object.keys(remainingAvail).length > 0) {
            const days = Object.keys(remainingAvail);
            const day = days[Math.floor(Math.random() * days.length)];
            const timeSlot = remainingAvail[day][Math.floor(Math.random() * remainingAvail[day].length)];
            
            const availableLocations = findAvailableLocations(day, timeSlot, potentialGroup.length);
            if (availableLocations.length > 0) {
              const location = availableLocations[Math.floor(Math.random() * availableLocations.length)];
              if (bookLocation(location, day, timeSlot)) {
                const studyGroup = new StudyGroup(groupId, day, timeSlot, location, potentialGroup);
                studyGroups.push(studyGroup);
                groupId++;
                added = true;
              }
            }
          }
        }
      }
      
      return studyGroups;
    }

    function sendStudentEmail(student, group) {
      /**
       * Send email to student with their group details
       */
      const timeInfo = group.timeSlot === "morning" ? "9:00 AM - 12:00 PM" : "1:00 PM - 4:00 PM";
      
      const subject = `Your Study Group Assignment - Group #${group.id}`;
      
      const body = `
        Hello ${student.name},
        
        You have been successfully assigned to Study Group #${group.id}. Here are the details:
        
        Day: ${group.day}
        Time: ${timeInfo}
        Location: ${group.location.name}
        Group Size: ${group.students.length} students
        
        Your group includes students from the following degrees:
        ${[...new Set(group.students.map(s => s.degree))].join(", ")}
        
        Please arrive 5 minutes before the session starts.
        
        Best regards,
        University Study Group Program
      `;
      
      sendEmail(student.email, subject, body);
    }

    function sendOrganizerEmail(group) {
      /**
       * Send booking confirmation and catering recommendations to organizers
       */
      const timeInfo = group.timeSlot === "morning" ? "9:00 AM - 12:00 PM" : "1:00 PM - 4:00 PM";
      
      // Find nearby catering options (would be more sophisticated in a real system)
      const shuffledCatering = [...cateringOptions].sort(() => 0.5 - Math.random());
      const recommendedCatering = shuffledCatering.slice(0, Math.min(3, cateringOptions.length));
      
      const subject = `Study Group #${group.id} - Booking Confirmation`;
      
      const body = `
        Study Group #${group.id} has been successfully created:
        
        Day: ${group.day}
        Time: ${timeInfo}
        Location: ${group.location.name}
        Group Size: ${group.students.length}
        
        Student Information:
        ${group.students.map(s => `- ${s.name}, ${s.degree}, ${s.email}`).join("\n")}
        
        Recommended Catering Options:
        ${recommendedCatering.map(c => `- ${c.name} (${c.priceRange}) - ${c.location}, ${c.distanceToCampus} min walking distance`).join("\n")}
        
        Please confirm catering arrangements 24 hours before the session.
      `;
      
      sendEmail(SENDER_EMAIL, subject, body); // Sent to organizers
    }

    function sendEmail(recipient, subject, body) {
      /**
       * Send an email (For demonstration - in a real system this would connect to SMTP)
       */
      console.log(`\nEMAIL to: ${recipient}`);
      console.log(`Subject: ${subject}`);
      console.log(`Body: ${body}`);
      console.log("-".repeat(50));
    }

    function addEmailPreview(emailContent) {
      const emailDiv = document.createElement('div');
      emailDiv.className = 'email-preview';
      
      const lines = emailContent.split('\n');
      let recipient = '';
      let subject = '';
      let body = '';
      
      for (let i = 0; i < lines.length; i++) {
        const line = lines[i].trim();
        
        if (line.startsWith('EMAIL to:')) {
          recipient = line.replace('EMAIL to:', '').trim();
        } else if (line.startsWith('Subject:')) {
          subject = line.replace('Subject:', '').trim();
        } else if (line && !line.startsWith('-')) {
          if (body) {
            body += '\n' + line;
          } else {
            body = line;
          }
        }
      }
      
      emailDiv.innerHTML = `
        <div class="email-header">
          <strong>To:</strong> ${recipient}<br>
          <strong>Subject:</strong> ${subject}
        </div>
        <div class="email-body">
          ${body.replace(/\n/g, '<br>')}
        </div>
      `;
      
      emailsContainer.appendChild(emailDiv);
    }

    function main() {
      /**
       * Main function to run the study group allocation system
       */
      const statusBar = document.getElementById('status-bar');
      statusBar.textContent = "Starting study group allocation process...";
      
      console.log("Starting study group allocation process...");
      const studyGroups = createStudyGroups();
      
      console.log(`Created ${studyGroups.length} study groups`);
      
      renderGroups(studyGroups);
      
      for (const group of studyGroups) {
        console.log(`\nGroup #${group.id} - ${group.day} (${group.timeSlot})`);
        console.log(`Location: ${group.location.name}`);
        console.log(`Students: ${group.students.map(s => s.name).join(', ')}`);
        
        // Send emails
        for (const student of group.students) {
          sendStudentEmail(student, group);
        }
        
        sendOrganizerEmail(group);
      }
      
      console.log("\nAllocation process completed!");
      statusBar.textContent = `Allocation completed! Created ${studyGroups.length} study groups.`;
      
      // Switch to the groups tab
      showTab('groups');
    }

    function renderGroups(studyGroups) {
      const groupsContainer = document.getElementById('groups-container');
      groupsContainer.innerHTML = '';
      
      if (studyGroups.length === 0) {
        groupsContainer.innerHTML = '<p>No study groups have been created yet.</p>';
        return;
      }
      
      studyGroups.forEach(group => {
        const timeInfo = group.timeSlot === "morning" ? "9:00 AM - 12:00 PM" : "1:00 PM - 4:00 PM";
        
        const groupCard = document.createElement('div');
        groupCard.className = 'card group-card';
        
        groupCard.innerHTML = `
          <h3>Group #${group.id} - ${group.day}</h3>
          <p><strong>Time:</strong> ${timeInfo}</p>
          <p><strong>Location:</strong> ${group.location.name}</p>
          <p><strong>Students (${group.students.length}):</strong></p>
          <ul class="student-list">
            ${group.students.map(student => `
              <li>${student.name} (${student.degree})</li>
            `